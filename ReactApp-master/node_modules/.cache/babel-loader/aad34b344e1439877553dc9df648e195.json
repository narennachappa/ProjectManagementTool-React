{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _isFunction2 = require('lodash/isFunction');\n\nvar _isFunction3 = _interopRequireDefault(_isFunction2);\n\nvar _has2 = require('lodash/has');\n\nvar _has3 = _interopRequireDefault(_has2);\n\nvar _forEach2 = require('lodash/forEach');\n\nvar _forEach3 = _interopRequireDefault(_forEach2);\n\nvar _trim2 = require('lodash/trim');\n\nvar _trim3 = _interopRequireDefault(_trim2);\n\nvar _size2 = require('lodash/size');\n\nvar _size3 = _interopRequireDefault(_size2);\n\nvar _isArray2 = require('lodash/isArray');\n\nvar _isArray3 = _interopRequireDefault(_isArray2);\n\nvar _isString2 = require('lodash/isString');\n\nvar _isString3 = _interopRequireDefault(_isString2);\n\nvar _isObject2 = require('lodash/isObject');\n\nvar _isObject3 = _interopRequireDefault(_isObject2);\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nexports.firestoreRef = firestoreRef;\nexports.getQueryName = getQueryName;\nexports.listenerExists = listenerExists;\nexports.attachListener = attachListener;\nexports.detachListener = detachListener;\nexports.queryStrToObj = queryStrToObj;\nexports.getQueryConfig = getQueryConfig;\nexports.getQueryConfigs = getQueryConfigs;\nexports.orderedFromSnap = orderedFromSnap;\nexports.dataByIdSnapshot = dataByIdSnapshot;\n\nvar _constants = require('../constants');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _toArray(arr) {\n  return Array.isArray(arr) ? arr : Array.from(arr);\n}\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction addWhereToRef(ref, where) {\n  if (!(0, _isArray3.default)(where)) {\n    throw new Error('where parameter must be an array.');\n  }\n\n  if ((0, _isString3.default)(where[0])) {\n    return where.length > 1 ? ref.where.apply(ref, _toConsumableArray(where)) : ref.where(where[0]);\n  }\n\n  return where.reduce(function (acc, whereArgs) {\n    return addWhereToRef(acc, whereArgs);\n  }, ref);\n}\n\nfunction addOrderByToRef(ref, orderBy) {\n  if (!(0, _isArray3.default)(orderBy) && !(0, _isString3.default)(orderBy)) {\n    throw new Error('orderBy parameter must be an array or string.');\n  }\n\n  if ((0, _isString3.default)(orderBy)) {\n    return ref.orderBy(orderBy);\n  }\n\n  if ((0, _isString3.default)(orderBy[0])) {\n    return ref.orderBy.apply(ref, _toConsumableArray(orderBy));\n  }\n\n  return orderBy.reduce(function (acc, orderByArgs) {\n    return addOrderByToRef(acc, orderByArgs);\n  }, ref);\n}\n\nfunction handleSubcollections(ref, subcollectionList) {\n  if (subcollectionList) {\n    (0, _forEach3.default)(subcollectionList, function (subcollection) {\n      if (subcollection.collection) {\n        if (!(0, _isFunction3.default)(ref.collection)) {\n          throw new Error('Collection can only be run on a document. Check that query config for subcollection: \"' + subcollection.collection + '\" contains a doc parameter.');\n        }\n\n        ref = ref.collection(subcollection.collection);\n      }\n\n      if (subcollection.doc) ref = ref.doc(subcollection.doc);\n      if (subcollection.where) ref = addWhereToRef(ref, subcollection.where);\n\n      if (subcollection.orderBy) {\n        ref = addOrderByToRef(ref, subcollection.orderBy);\n      }\n\n      if (subcollection.limit) ref = ref.limit(subcollection.limit);\n      if (subcollection.startAt) ref = ref.startAt(subcollection.startAt);\n\n      if (subcollection.startAfter) {\n        ref = ref.startAfter(subcollection.startAfter);\n      }\n\n      if (subcollection.endAt) ref = ref.endAt(subcollection.endAt);\n      if (subcollection.endBefore) ref = ref.endBefore(subcollection.endBefore);\n      ref = handleSubcollections(ref, subcollection.subcollections);\n    });\n  }\n\n  return ref;\n}\n\nfunction firestoreRef(firebase, dispatch, meta) {\n  if (!firebase.firestore) {\n    throw new Error('Firestore must be required and initalized.');\n  }\n\n  var collection = meta.collection,\n      doc = meta.doc,\n      subcollections = meta.subcollections,\n      where = meta.where,\n      orderBy = meta.orderBy,\n      limit = meta.limit,\n      startAt = meta.startAt,\n      startAfter = meta.startAfter,\n      endAt = meta.endAt,\n      endBefore = meta.endBefore;\n  var ref = firebase.firestore().collection(collection);\n  if (doc) ref = ref.doc(doc);\n  ref = handleSubcollections(ref, subcollections);\n  if (where) ref = addWhereToRef(ref, where);\n  if (orderBy) ref = addOrderByToRef(ref, orderBy);\n  if (limit) ref = ref.limit(limit);\n  if (startAt) ref = ref.startAt(startAt);\n  if (startAfter) ref = ref.startAfter(startAfter);\n  if (endAt) ref = ref.endAt(endAt);\n  if (endBefore) ref = ref.endBefore(endBefore);\n  return ref;\n}\n\nfunction whereToStr(where) {\n  return (0, _isString3.default)(where[0]) ? 'where=' + where.join(':') : where.map(whereToStr);\n}\n\nfunction getQueryName(meta) {\n  if ((0, _isString3.default)(meta)) {\n    return meta;\n  }\n\n  var collection = meta.collection,\n      doc = meta.doc,\n      subcollections = meta.subcollections,\n      where = meta.where,\n      limit = meta.limit;\n\n  if (!collection) {\n    throw new Error('Collection is required to build query name');\n  }\n\n  var basePath = collection;\n\n  if (doc) {\n    basePath = basePath.concat('/' + doc);\n  }\n\n  if (subcollections) {\n    var mappedCollections = subcollections.map(function (subcollection) {\n      return getQueryName(subcollection);\n    });\n    basePath = basePath + '/' + mappedCollections.join('/');\n  }\n\n  if (where) {\n    if (!(0, _isArray3.default)(where)) {\n      throw new Error('where parameter must be an array.');\n    }\n\n    basePath = basePath.concat('?' + whereToStr(where));\n  }\n\n  if (typeof limit !== 'undefined') {\n    var limitStr = 'limit=' + limit;\n    basePath = basePath.concat('' + (where ? '&' : '?') + limitStr);\n  }\n\n  return basePath;\n}\n\nfunction confirmMetaAndConfig(firebase, meta) {\n  if (!meta) {\n    throw new Error('Meta data is required to attach listener.');\n  }\n\n  if (!(0, _has3.default)(firebase, '_.listeners')) {\n    throw new Error('Internal Firebase object required to attach listener. Confirm that reduxFirestore enhancer was added when you were creating your store');\n  }\n}\n\nfunction listenerExists(firebase, meta) {\n  confirmMetaAndConfig(firebase, meta);\n  var name = getQueryName(meta);\n  return !!firebase._.listeners[name];\n}\n\nfunction attachListener(firebase, dispatch, meta, unsubscribe) {\n  confirmMetaAndConfig(firebase, meta);\n  var name = getQueryName(meta);\n\n  if (!firebase._.listeners[name]) {\n    firebase._.listeners[name] = unsubscribe;\n  }\n\n  dispatch({\n    type: _constants.actionTypes.SET_LISTENER,\n    meta: meta,\n    payload: {\n      name: name\n    }\n  });\n  return firebase._.listeners;\n}\n\nfunction detachListener(firebase, dispatch, meta) {\n  var name = getQueryName(meta);\n\n  if (firebase._.listeners[name]) {\n    firebase._.listeners[name]();\n\n    delete firebase._.listeners[name];\n  }\n\n  dispatch({\n    type: _constants.actionTypes.UNSET_LISTENER,\n    meta: meta,\n    payload: {\n      name: name\n    }\n  });\n}\n\nfunction queryStrToObj(queryPathStr, parsedPath) {\n  var pathArr = parsedPath || (0, _trim3.default)(queryPathStr, ['/']).split('/');\n\n  var _pathArr = _toArray(pathArr),\n      collection = _pathArr[0],\n      doc = _pathArr[1],\n      subcollections = _pathArr.slice(2);\n\n  var queryObj = {};\n  if (collection) queryObj.collection = collection;\n  if (doc) queryObj.doc = doc;\n\n  if (subcollections.length) {\n    queryObj.subcollections = [queryStrToObj('', subcollections)];\n  }\n\n  return queryObj;\n}\n\nfunction getQueryConfig(query) {\n  if ((0, _isString3.default)(query)) {\n    return queryStrToObj(query);\n  }\n\n  if ((0, _isObject3.default)(query)) {\n    if (!query.collection && !query.doc) {\n      throw new Error('Collection and/or Doc are required parameters within query definition object.');\n    }\n\n    return query;\n  }\n\n  throw new Error('Invalid Path Definition: Only Strings and Objects are accepted.');\n}\n\nfunction getQueryConfigs(queries) {\n  if ((0, _isArray3.default)(queries)) {\n    return queries.map(getQueryConfig);\n  }\n\n  if ((0, _isString3.default)(queries)) {\n    return queryStrToObj(queries);\n  }\n\n  if ((0, _isObject3.default)(queries)) {\n    return [getQueryConfig(queries)];\n  }\n\n  throw new Error('Querie(s) must be an Array or a string.');\n}\n\nfunction orderedFromSnap(snap) {\n  var ordered = [];\n\n  if (snap.data && snap.exists) {\n    var obj = (0, _isObject3.default)(snap.data()) ? _extends({\n      id: snap.id\n    }, snap.data() || snap.data) : {\n      id: snap.id,\n      data: snap.data()\n    };\n    ordered.push(obj);\n  } else if (snap.forEach) {\n    snap.forEach(function (doc) {\n      var obj = (0, _isObject3.default)(doc.data()) ? _extends({\n        id: doc.id\n      }, doc.data() || doc.data) : {\n        id: doc.id,\n        data: doc.data()\n      };\n      ordered.push(obj);\n    });\n  }\n\n  return ordered;\n}\n\nfunction dataByIdSnapshot(snap) {\n  var data = {};\n\n  if (snap.data && snap.exists) {\n    data[snap.id] = snap.data();\n  } else if (snap.forEach) {\n    snap.forEach(function (doc) {\n      data[doc.id] = doc.data() || doc;\n    });\n  }\n\n  return (0, _size3.default)(data) ? data : null;\n}","map":{"version":3,"sources":["C:/Users/naren/Desktop/ReactApp-master/ReactApp-master/node_modules/redux-firestore/es/utils/query.js"],"names":["Object","defineProperty","exports","value","_isFunction2","require","_isFunction3","_interopRequireDefault","_has2","_has3","_forEach2","_forEach3","_trim2","_trim3","_size2","_size3","_isArray2","_isArray3","_isString2","_isString3","_isObject2","_isObject3","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","firestoreRef","getQueryName","listenerExists","attachListener","detachListener","queryStrToObj","getQueryConfig","getQueryConfigs","orderedFromSnap","dataByIdSnapshot","_constants","obj","__esModule","default","_toArray","arr","Array","isArray","from","_toConsumableArray","arr2","addWhereToRef","ref","where","Error","apply","reduce","acc","whereArgs","addOrderByToRef","orderBy","orderByArgs","handleSubcollections","subcollectionList","subcollection","collection","doc","limit","startAt","startAfter","endAt","endBefore","subcollections","firebase","dispatch","meta","firestore","whereToStr","join","map","basePath","concat","mappedCollections","limitStr","confirmMetaAndConfig","name","_","listeners","unsubscribe","type","actionTypes","SET_LISTENER","payload","UNSET_LISTENER","queryPathStr","parsedPath","pathArr","split","_pathArr","slice","queryObj","query","queries","snap","ordered","data","exists","id","push","forEach"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _isFunction2 = require('lodash/isFunction');\n\nvar _isFunction3 = _interopRequireDefault(_isFunction2);\n\nvar _has2 = require('lodash/has');\n\nvar _has3 = _interopRequireDefault(_has2);\n\nvar _forEach2 = require('lodash/forEach');\n\nvar _forEach3 = _interopRequireDefault(_forEach2);\n\nvar _trim2 = require('lodash/trim');\n\nvar _trim3 = _interopRequireDefault(_trim2);\n\nvar _size2 = require('lodash/size');\n\nvar _size3 = _interopRequireDefault(_size2);\n\nvar _isArray2 = require('lodash/isArray');\n\nvar _isArray3 = _interopRequireDefault(_isArray2);\n\nvar _isString2 = require('lodash/isString');\n\nvar _isString3 = _interopRequireDefault(_isString2);\n\nvar _isObject2 = require('lodash/isObject');\n\nvar _isObject3 = _interopRequireDefault(_isObject2);\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.firestoreRef = firestoreRef;\nexports.getQueryName = getQueryName;\nexports.listenerExists = listenerExists;\nexports.attachListener = attachListener;\nexports.detachListener = detachListener;\nexports.queryStrToObj = queryStrToObj;\nexports.getQueryConfig = getQueryConfig;\nexports.getQueryConfigs = getQueryConfigs;\nexports.orderedFromSnap = orderedFromSnap;\nexports.dataByIdSnapshot = dataByIdSnapshot;\n\nvar _constants = require('../constants');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toArray(arr) { return Array.isArray(arr) ? arr : Array.from(arr); }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction addWhereToRef(ref, where) {\n  if (!(0, _isArray3.default)(where)) {\n    throw new Error('where parameter must be an array.');\n  }\n  if ((0, _isString3.default)(where[0])) {\n    return where.length > 1 ? ref.where.apply(ref, _toConsumableArray(where)) : ref.where(where[0]);\n  }\n\n  return where.reduce(function (acc, whereArgs) {\n    return addWhereToRef(acc, whereArgs);\n  }, ref);\n}\n\nfunction addOrderByToRef(ref, orderBy) {\n  if (!(0, _isArray3.default)(orderBy) && !(0, _isString3.default)(orderBy)) {\n    throw new Error('orderBy parameter must be an array or string.');\n  }\n  if ((0, _isString3.default)(orderBy)) {\n    return ref.orderBy(orderBy);\n  }\n  if ((0, _isString3.default)(orderBy[0])) {\n    return ref.orderBy.apply(ref, _toConsumableArray(orderBy));\n  }\n  return orderBy.reduce(function (acc, orderByArgs) {\n    return addOrderByToRef(acc, orderByArgs);\n  }, ref);\n}\n\nfunction handleSubcollections(ref, subcollectionList) {\n  if (subcollectionList) {\n    (0, _forEach3.default)(subcollectionList, function (subcollection) {\n      if (subcollection.collection) {\n        if (!(0, _isFunction3.default)(ref.collection)) {\n          throw new Error('Collection can only be run on a document. Check that query config for subcollection: \"' + subcollection.collection + '\" contains a doc parameter.');\n        }\n        ref = ref.collection(subcollection.collection);\n      }\n      if (subcollection.doc) ref = ref.doc(subcollection.doc);\n      if (subcollection.where) ref = addWhereToRef(ref, subcollection.where);\n      if (subcollection.orderBy) {\n        ref = addOrderByToRef(ref, subcollection.orderBy);\n      }\n      if (subcollection.limit) ref = ref.limit(subcollection.limit);\n      if (subcollection.startAt) ref = ref.startAt(subcollection.startAt);\n      if (subcollection.startAfter) {\n        ref = ref.startAfter(subcollection.startAfter);\n      }\n      if (subcollection.endAt) ref = ref.endAt(subcollection.endAt);\n      if (subcollection.endBefore) ref = ref.endBefore(subcollection.endBefore);\n\n      ref = handleSubcollections(ref, subcollection.subcollections);\n    });\n  }\n  return ref;\n}\n\nfunction firestoreRef(firebase, dispatch, meta) {\n  if (!firebase.firestore) {\n    throw new Error('Firestore must be required and initalized.');\n  }\n  var collection = meta.collection,\n      doc = meta.doc,\n      subcollections = meta.subcollections,\n      where = meta.where,\n      orderBy = meta.orderBy,\n      limit = meta.limit,\n      startAt = meta.startAt,\n      startAfter = meta.startAfter,\n      endAt = meta.endAt,\n      endBefore = meta.endBefore;\n\n  var ref = firebase.firestore().collection(collection);\n\n  if (doc) ref = ref.doc(doc);\n  ref = handleSubcollections(ref, subcollections);\n  if (where) ref = addWhereToRef(ref, where);\n  if (orderBy) ref = addOrderByToRef(ref, orderBy);\n  if (limit) ref = ref.limit(limit);\n  if (startAt) ref = ref.startAt(startAt);\n  if (startAfter) ref = ref.startAfter(startAfter);\n  if (endAt) ref = ref.endAt(endAt);\n  if (endBefore) ref = ref.endBefore(endBefore);\n  return ref;\n}\n\nfunction whereToStr(where) {\n  return (0, _isString3.default)(where[0]) ? 'where=' + where.join(':') : where.map(whereToStr);\n}\n\nfunction getQueryName(meta) {\n  if ((0, _isString3.default)(meta)) {\n    return meta;\n  }\n  var collection = meta.collection,\n      doc = meta.doc,\n      subcollections = meta.subcollections,\n      where = meta.where,\n      limit = meta.limit;\n\n  if (!collection) {\n    throw new Error('Collection is required to build query name');\n  }\n  var basePath = collection;\n  if (doc) {\n    basePath = basePath.concat('/' + doc);\n  }\n  if (subcollections) {\n    var mappedCollections = subcollections.map(function (subcollection) {\n      return getQueryName(subcollection);\n    });\n    basePath = basePath + '/' + mappedCollections.join('/');\n  }\n  if (where) {\n    if (!(0, _isArray3.default)(where)) {\n      throw new Error('where parameter must be an array.');\n    }\n    basePath = basePath.concat('?' + whereToStr(where));\n  }\n  if (typeof limit !== 'undefined') {\n    var limitStr = 'limit=' + limit;\n    basePath = basePath.concat('' + (where ? '&' : '?') + limitStr);\n  }\n  return basePath;\n}\n\nfunction confirmMetaAndConfig(firebase, meta) {\n  if (!meta) {\n    throw new Error('Meta data is required to attach listener.');\n  }\n  if (!(0, _has3.default)(firebase, '_.listeners')) {\n    throw new Error('Internal Firebase object required to attach listener. Confirm that reduxFirestore enhancer was added when you were creating your store');\n  }\n}\n\nfunction listenerExists(firebase, meta) {\n  confirmMetaAndConfig(firebase, meta);\n  var name = getQueryName(meta);\n  return !!firebase._.listeners[name];\n}\n\nfunction attachListener(firebase, dispatch, meta, unsubscribe) {\n  confirmMetaAndConfig(firebase, meta);\n\n  var name = getQueryName(meta);\n  if (!firebase._.listeners[name]) {\n    firebase._.listeners[name] = unsubscribe;\n  }\n\n  dispatch({\n    type: _constants.actionTypes.SET_LISTENER,\n    meta: meta,\n    payload: { name: name }\n  });\n\n  return firebase._.listeners;\n}\n\nfunction detachListener(firebase, dispatch, meta) {\n  var name = getQueryName(meta);\n  if (firebase._.listeners[name]) {\n    firebase._.listeners[name]();\n    delete firebase._.listeners[name];\n  }\n\n  dispatch({\n    type: _constants.actionTypes.UNSET_LISTENER,\n    meta: meta,\n    payload: { name: name }\n  });\n}\n\nfunction queryStrToObj(queryPathStr, parsedPath) {\n  var pathArr = parsedPath || (0, _trim3.default)(queryPathStr, ['/']).split('/');\n\n  var _pathArr = _toArray(pathArr),\n      collection = _pathArr[0],\n      doc = _pathArr[1],\n      subcollections = _pathArr.slice(2);\n\n  var queryObj = {};\n  if (collection) queryObj.collection = collection;\n  if (doc) queryObj.doc = doc;\n  if (subcollections.length) {\n    queryObj.subcollections = [queryStrToObj('', subcollections)];\n  }\n  return queryObj;\n}\n\nfunction getQueryConfig(query) {\n  if ((0, _isString3.default)(query)) {\n    return queryStrToObj(query);\n  }\n  if ((0, _isObject3.default)(query)) {\n    if (!query.collection && !query.doc) {\n      throw new Error('Collection and/or Doc are required parameters within query definition object.');\n    }\n    return query;\n  }\n  throw new Error('Invalid Path Definition: Only Strings and Objects are accepted.');\n}\n\nfunction getQueryConfigs(queries) {\n  if ((0, _isArray3.default)(queries)) {\n    return queries.map(getQueryConfig);\n  }\n  if ((0, _isString3.default)(queries)) {\n    return queryStrToObj(queries);\n  }\n  if ((0, _isObject3.default)(queries)) {\n    return [getQueryConfig(queries)];\n  }\n  throw new Error('Querie(s) must be an Array or a string.');\n}\n\nfunction orderedFromSnap(snap) {\n  var ordered = [];\n  if (snap.data && snap.exists) {\n    var obj = (0, _isObject3.default)(snap.data()) ? _extends({ id: snap.id }, snap.data() || snap.data) : { id: snap.id, data: snap.data() };\n    ordered.push(obj);\n  } else if (snap.forEach) {\n    snap.forEach(function (doc) {\n      var obj = (0, _isObject3.default)(doc.data()) ? _extends({ id: doc.id }, doc.data() || doc.data) : { id: doc.id, data: doc.data() };\n      ordered.push(obj);\n    });\n  }\n  return ordered;\n}\n\nfunction dataByIdSnapshot(snap) {\n  var data = {};\n  if (snap.data && snap.exists) {\n    data[snap.id] = snap.data();\n  } else if (snap.forEach) {\n    snap.forEach(function (doc) {\n      data[doc.id] = doc.data() || doc;\n    });\n  }\n  return (0, _size3.default)(data) ? data : null;\n}"]},"metadata":{},"sourceType":"script"}